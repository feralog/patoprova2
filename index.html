<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quiz Educacional</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; padding-top: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .quiz-container { max-width: 800px; margin: 0 auto; background: #fff; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); padding: 30px; }
    .timer { position: fixed; top: 10px; right: 10px; background: #007bff; color: #fff; padding: 10px 15px; border-radius: 25px; font-weight: bold; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    .option { cursor: pointer; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #dee2e6; transition: all .3s; }
    .option:hover { background: #f1f8ff; border-color: #b8daff; }
    .correct { background: #d4edda !important; border-color: #c3e6cb !important; color: #155724; }
    .incorrect { background: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24; }
    .explanation { background: #e9ecef; padding: 15px; border-radius: 8px; margin-top: 15px; display: none; }
    .question-list-item { cursor: pointer; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #dee2e6; background: #f8f9fa; }
    .question-detail { background: #fff; padding: 15px; border-radius: 8px; margin-top: 10px; display: none; }
    .leaderboard-table { width: 100%; margin-top: 20px; }
    .section { display: none; }
    .active { display: block; }
    h1, h2, h3 { color: #0056b3; }
    .btn-next { display: none; }
  </style>
</head>
<body>

<div id="timer" class="timer" style="display:none;">00:00</div>

<div class="container quiz-container">
  <!-- TELA INICIAL -->
  <section id="start-section" class="section active">
    <h1 class="text-center mb-4">Título do Seu Quiz</h1>
    <div class="mb-3">
      <label for="username" class="form-label">Digite seu nome:</label>
      <input type="text" class="form-control" id="username" placeholder="Seu nome">
    </div>
    <button id="start-button" class="btn btn-primary btn-lg w-100">Iniciar Quiz</button>
  </section>

  <!-- TELA QUIZ -->
  <section id="quiz-section" class="section">
    <h2 id="question-number" class="mb-3"></h2>
    <h3 id="question-text" class="mb-4"></h3>
    <div id="options-container"></div>
    <div id="explanation" class="explanation"></div>
    <button id="next-button" class="btn btn-primary mt-3 btn-next">Próxima Questão</button>
  </section>

  <!-- RESULTADOS -->
  <section id="results-section" class="section">
    <h2 class="text-center mb-4">Resultado Final</h2>
    <div class="alert alert-primary">
      <strong id="final-score"></strong>
      <div id="final-time" class="mt-2"></div>
    </div>
    <h3 class="mb-3">Suas respostas:</h3>
    <div id="questions-list"></div>
    <h3 class="mt-4 mb-3">Classificação</h3>
    <div class="table-responsive">
      <table class="table table-striped leaderboard-table">
        <thead>
          <tr><th>#</th><th>Nome</th><th>Pontuação</th><th>Tempo</th></tr>
        </thead>
        <tbody id="leaderboard-body"></tbody>
      </table>
    </div>
    <button id="restart-button" class="btn btn-primary btn-lg w-100 mt-4">Voltar ao Início</button>
  </section>
</div>

<!-- Bootstrap Bundle -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
  // === CONFIGURAÇÃO - INSIRA AQUI SUA API_URL DO WEB APP ===
  const API_URL = 'https://script.google.com/macros/s/AKfycbxe81TkQVeXlXdfTTaTewFKKXV2d3BuGk_2DSHFNfnAcQR_VWOaCoKuSqxezII-4l_0BA/exec';

  // === QUESTÕES DO QUIZ - SUBSTITUA ESTE ARRAY PELAS NOVAS QUESTÕES ===
  const questions = [
    // Exemplo de objeto de questão
    
  {
    question: "O que caracteriza atresia esofágica?",
    options: [
      "Desenvolvimento incompleto do esôfago com segmento cego",
      "Estreitamento do lúmen esofágico por fibrose",
      "Ausência total do esôfago",
      "Presença de mucosa gástrica no esôfago terminal",
      "Fístula entre esôfago e estômago"
    ],
    correctIndex: 0,
    explanation: "Atresia esofágica é a interrupção congênita do tubo esofágico, geralmente terminando em fundo cego."
  },
  {
    question: "Qual é o achado clínico clássico na estenose pilórica hipertrófica?",
    options: [
      "Vômito não bilioso projetável após as mamadas",
      "Vômito bilioso em jato após as mamadas",
      "Dor em cólica pós-prandial",
      "Regurgitação em pequena quantidade",
      "Disfagia progressiva"
    ],
    correctIndex: 0,
    explanation: "A estenose pilórica causa vômito não bilioso projetável em recém-nascidos entre a 3ª e 6ª semana de vida."
  },
  {
    question: "Em heterotopia do trato GI, qual tecido ectópico é mais comum no esôfago?",
    options: [
      "Mucosa gástrica",
      "Parênquima pancreático",
      "Mucosa intestinal",
      "Tecido adiposo",
      "Tecido ósseo"
    ],
    correctIndex: 0,
    explanation: "A heterotopia esofágica frequentemente apresenta mucosa gástrica no esôfago terminal."
  },
  {
    question: "Na classificação de hérnia de hiato, o que caracteriza o tipo III?",
    options: [
      "Deslizamento do estômago para o tórax",
      "Esôfago encurtado",
      "Rolamento sem deslizamento do esôfago",
      "Hérnia diafragmática congênita",
      "Defeito traumático do diafragma"
    ],
    correctIndex: 0,
    explanation: "Hérnia tipo III é a de deslizamento, em que o estômago hernia para o tórax."
  },
  {
    question: "Qual síndrome está associada à ruptura espontânea transmural do esôfago?",
    options: [
      "Laceração de Mallory-Weiss",
      "Síndrome de Boerhaave",
      "Estenose esofágica",
      "Esofagite por pílula",
      "Agenesia esofágica"
    ],
    correctIndex: 1,
    explanation: "Boerhaave é a ruptura espontânea completa da parede esofágica após vômitos intensos."
  },
  {
    question: "Qual agente é o mais comum em esofagite infecciosa em adultos?",
    options: [
      "Candida spp.",
      "Herpes simplex virus",
      "Citomegalovirus",
      "Estafilococos",
      "Salmonela"
    ],
    correctIndex: 0,
    explanation: "Candida é a causa mais frequente de esofagite infecciosa em adultos imunocomprometidos."
  },
  {
    question: "Qual é a característica histológica típica da esofagite por Citomegalovirus?",
    options: [
      "Membranas pseudomembranosas aderentes",
      "Inclusões em 'olhos de coruja'",
      "Células multinucleadas gigantes",
      "Úlceras lineares superficiais",
      "Proliferação de células escamosas"
    ],
    correctIndex: 1,
    explanation: "CMV causa inclusões intranucleares em aspecto de 'olhos de coruja'."
  },
  {
    question: "Na DRGE, qual fator contribui para o refluxo gastroesofágico?",
    options: [
      "Tônus diminuído do esfíncter esofágico inferior",
      "Hipercontratilidade esofágica",
      "Aumento da secreção de pepsina",
      "Metaplasia colunar no esôfago",
      "Produção excessiva de muco esofágico"
    ],
    correctIndex: 0,
    explanation: "DRGE resulta da diminuição do tônus do esfíncter inferior, permitindo refluxo ácido."
  },
  {
    question: "Qual condição é caracterizada pela substituição do epitélio escamoso por colunar no esôfago?",
    options: [
      "Esofagite aguda",
      "Estenose esofágica",
      "Esôfago de Barrett",
      "Carcinoma escamoso",
      "Fístula traqueoesofágica"
    ],
    correctIndex: 2,
    explanation: "Esôfago de Barrett é metaplasia colunar em resposta à exposição ácida crônica."
  },
  {
    question: "Qual tumor esofágico surge a partir do esôfago de Barrett?",
    options: [
      "Adenocarcinoma",
      "Carcinoma de células escamosas",
      "Linfoma",
      "Leiomioma",
      "GIST"
    ],
    correctIndex: 0,
    explanation: "Adenocarcinoma esofágico desenvolve-se sobre mucosa de Barrett metaplásica."
  },
  {
    question: "Qual célula gástrica produz pepsinogênio?",
    options: [
      "Célula principal",
      "Célula parietal",
      "Célula G",
      "Célula D",
      "Célula foveolar"
    ],
    correctIndex: 0,
    explanation: "As células principais secretam pepsinogênio, precursor da pepsina."
  },
  {
    question: "Como se define gastropatia?",
    options: [
      "Lesão da mucosa gástrica sem inflamação significativa",
      "Inflamação aguda da mucosa gástrica",
      "Metaplasia intestinal no estômago",
      "Úlcera péptica crônica",
      "Infecção por H. pylori"
    ],
    correctIndex: 0,
    explanation: "Gastropatia refere-se a alterações mucosas sem o infiltrado inflamatório marcante."
  },
  {
    question: "Qual é a causa mais comum de gastropatia erosiva?",
    options: [
      "Uso de AINEs",
      "Infecção por H. pylori",
      "Doença autoimune",
      "Obesidade",
      "Tabagismo"
    ],
    correctIndex: 0,
    explanation: "AINEs lesam diretamente a mucosa, provocando erosões sem inflamação intensa."
  },
  {
    question: "Qual a principal causa de gastrite crônica?",
    options: [
      "Infecção por Helicobacter pylori",
      "Uso de AINEs",
      "Doença autoimune",
      "Estresse físico agudo",
      "Refluxo biliar"
    ],
    correctIndex: 0,
    explanation: "H. pylori é o agente mais frequente em gastrite crônica."
  },
  {
    question: "Que tipo de úlcera de estresse está associada a doença intracraniana?",
    options: [
      "Úlcera de Cushing",
      "Úlcera de Curling",
      "Úlcera péptica crônica",
      "Úlcera por H. pylori",
      "Úlcera por AINEs"
    ],
    correctIndex: 0,
    explanation: "Úlceras de Cushing ocorrem em pacientes com lesão intracraniana grave."
  },
  {
    question: "Um recém-nascido de 4 semanas apresenta vômito não bilioso projetável e massa palpável em 'olive'. Qual o diagnóstico mais provável?",
    options: [
      "Atresia esofágica",
      "Estenose pilórica hipertrófica",
      "Hérnia diafragmática",
      "Estenose esofágica",
      "Agenesia esofágica"
    ],
    correctIndex: 1,
    explanation: "Massa em 'olive' e vômito projetável são clássicos de estenose pilórica."
  },
  {
    question: "Paciente com dor torácica súbita, enfisema subcutâneo e história de vômitos intensos. Diagnóstico mais compatível?",
    options: [
      "Laceração de Mallory-Weiss",
      "Síndrome de Boerhaave",
      "DRGE aguda",
      "Esofagite por pílula",
      "Carcinoma esofágico"
    ],
    correctIndex: 1,
    explanation: "Boerhaave cursa com ruptura transmural e enfisema subcutâneo após vômitos."
  },
  {
    question: "Mulher de 50 anos com DRGE crônica e metaplasia intestinal. Qual exame é indicado para rastrear displasia?",
    options: [
      "Endoscopia digestiva alta com biópsia",
      "Manometria esofágica",
      "pHmetria esofágica",
      "Trânsito esofagogástrico",
      "Tomografia de tórax"
    ],
    correctIndex: 0,
    explanation: "Endoscopia com biópsia é padrão-ouro para detectar displasia em Barrett."
  },
  {
    question: "Paciente com dispepsia e uso crônico de AINEs desenvolve erosões superficiais sem inflamação significativa. Qual termo descreve melhor esse quadro?",
    options: [
      "Gastrite aguda",
      "Gastropatia erosiva",
      "Úlcera péptica",
      "Gastrite crônica",
      "MALToma gástrico"
    ],
    correctIndex: 1,
    explanation: "Erosões sem inflamação marcante correspondem à gastropatia erosiva."
  },
  {
    question: "Em paciente com gastropatia erosiva por AINEs, qual abordagem terapêutica é mais indicada?",
    options: [
      "Suspender AINEs e iniciar inibidor da bomba de prótons",
      "Ressecção cirúrgica gástrica",
      "Terapia antibiótica para H. pylori",
      "Corticoterapia sistêmica",
      "Transfusão de sangue"
    ],
    correctIndex: 0,
    explanation: "Interromper AINEs e proteger mucosa com IBP é a medida inicial adequada."
  },
  {
    question: "O que caracteriza um íleo paralítico?",
    options: [
      "Paralisação das contrações intestinais sem obstrução mecânica",
      "Torção do intestino sobre si mesmo",
      "Formação de aderências entre alças intestinais",
      "Inflamação difusa da mucosa intestinal",
      "Bloqueio por tumor"
    ],
    correctIndex: 0,
    explanation: "O íleo paralítico é um distúrbio funcional caracterizado pela ausência de contrações intestinais sem obstrução mecânica."
  },
  {
    question: "Qual das seguintes NÃO é uma causa funcional de obstrução intestinal?",
    options: [
      "Íleo paralítico",
      "Íleo espástico",
      "Atresia intestinal",
      "Aderências intestinais",
      "Vólvulo"
    ],
    correctIndex: 2,
    explanation: "Atresia intestinal é uma causa mecânica congênita de obstrução, não funcional."
  },
  {
    question: "Qual sintoma NÃO faz parte do quadro clássico de obstrução intestinal?",
    options: [
      "Dor abdominal",
      "Diarreia",
      "Vômitos",
      "Distensão abdominal",
      "Parada de eliminação de gases"
    ],
    correctIndex: 1,
    explanation: "Diarreia não é típica, já que a obstrução intestinal leva à parada da eliminação de conteúdo distal."
  },
  {
    question: "Qual tipo de atresia intestinal congênita é mais comum?",
    options: [
      "Atresia jejunal",
      "Atresia íleal",
      "Atresia colônica",
      "Atresia duodenal",
      "Atresia esofágica"
    ],
    correctIndex: 3,
    explanation: "A atresia duodenal é a forma mais frequente de atresia intestinal congênita."
  },
  {
    question: "Qual das seguintes definições corresponde a uma hérnia intestinal?",
    options: [
      "Inflamação crônica do intestino",
      "Torção do intestino sobre si mesmo",
      "Protrusão de parte do intestino através de um defeito na parede abdominal",
      "Formação de aderências",
      "Invaginação de alça intestinal"
    ],
    correctIndex: 2,
    explanation: "A hérnia intestinal ocorre quando um segmento intestinal protrui através de um defeito na parede abdominal."
  },
  {
    question: "O que são aderências intestinais (bridas)?",
    options: [
      "Inflamação da mucosa intestinal",
      "Aumento da motilidade intestinal",
      "Defeito congênito",
      "Tecido cicatricial entre alças intestinais e estruturas adjacentes",
      "Infecção bacteriana"
    ],
    correctIndex: 3,
    explanation: "Aderências são faixas de tecido cicatricial que fixam alças intestinais a estruturas vizinhas."
  },
  {
    question: "Qual condição corresponde à torção de uma alça intestinal sobre si mesma?",
    options: [
      "Vólvulo",
      "Intussuscepção",
      "Megaesôfago",
      "Hérnia inguinal",
      "Perfuração intestinal"
    ],
    correctIndex: 0,
    explanation: "Vólvulo é a torção de uma alça intestinal em torno de seu próprio eixo."
  },
  {
    question: "Na intussuscepção, o que ocorre?",
    options: [
      "Protrusão de intestino através da parede abdominal",
      "Torção sobre o eixo central",
      "Compressão por aderências",
      "O segmento intestinal se dobra para dentro de outro segmento",
      "Obstrução por massa de vermes"
    ],
    correctIndex: 3,
    explanation: "Na intussuscepção, uma parte do intestino invagina-se dentro de um segmento adjacente."
  },
  {
    question: "Qual parasita pode causar obstrução intestinal por formação de bolo?",
    options: [
      "Ascaris lumbricoides",
      "Giardia lamblia",
      "Entamoeba histolytica",
      "Cryptosporidium parvum",
      "Strongyloides stercoralis"
    ],
    correctIndex: 0,
    explanation: "Ascaris lumbricoides pode formar um emaranhado de vermes que obstrui o lúmen intestinal."
  },
  {
    question: "No megacólon chagásico, observa-se:",
    options: [
      "Metaplasia intestinal no cólon",
      "Formação de divertículos",
      "Aumento da motilidade intestinal",
      "Persistência do ducto onfalomesentérico",
      "Destruição dos plexos nervosos mioentérico e submucoso"
    ],
    correctIndex: 4,
    explanation: "O megacólon chagásico resulta da destruição dos plexos nervosos mioentérico e submucoso pelo T. cruzi."
  },
  {
    question: "Divertículo de Meckel corresponde a:",
    options: [
      "Bolsa na parede do jejuno proximal",
      "Prega mucosa no cólon",
      "Protuberância na parede do íleo",
      "Aderência congênita no ceco",
      "Estenose no duodeno"
    ],
    correctIndex: 2,
    explanation: "O divertículo de Meckel é uma protuberância congênita na porção ileal do intestino delgado."
  },
  {
    question: "Qual gene está mutado em cerca de 50% dos casos de doença de Hirschsprung?",
    options: [
      "Gene CFTR",
      "Gene HLA-DQ2",
      "Gene AQP2",
      "Gene RET",
      "Gene BRCA1"
    ],
    correctIndex: 3,
    explanation: "Mutações no gene RET são encontradas em metade dos pacientes com doença de Hirschsprung."
  },
  {
    question: "Qual achado é típico do infarto mucoso em isquemia intestinal?",
    options: [
      "Necrose transmural",
      "Perfuração intestinal",
      "Cicatriz fibrosa na lâmina própria",
      "Formação de granulomas",
      "Proliferação de células escamosas"
    ],
    correctIndex: 2,
    explanation: "No infarto mucoso, ocorre necrose do topo das vilosidades e cicatriz fibrosa na lâmina própria."
  },
  {
    question: "Na doença celíaca, qual HLA está mais associado à predisposição?",
    options: [
      "HLA-DQ2",
      "HLA-B27",
      "HLA-DR4",
      "HLA-A2",
      "HLA-DP4"
    ],
    correctIndex: 0,
    explanation: "HLA-DQ2 é encontrado em aproximadamente 90% dos pacientes com doença celíaca."
  },
  {
    question: "Na classificação de Marsh, o Marsh III indica:",
    options: [
      "Lesão infiltrativa sem atrofia vilositária",
      "Hiperplasia criptal sem atrofia vilositária",
      "Lesão destrutiva com atrofia vilositária",
      "Ausência de alterações",
      "Inflamação crônica sem hiperplasia"
    ],
    correctIndex: 2,
    explanation: "Marsh III corresponde à fase destrutiva com atrofia das vilosidades intestinais."
  },
  {
    question: "Recém-nascido sem eliminação de mecônio em 48h, distensão abdominal e vômitos. Diagnóstico mais provável:",
    options: [
      "Atresia duodenal",
      "Hérnia inguinal encarcerada",
      "Doença de Hirschsprung",
      "Vólvulo sigmoide",
      "Divertículo de Meckel"
    ],
    correctIndex: 2,
    explanation: "A ausência de mecônio e sintomas de obstrução sugerem doença de Hirschsprung."
  },
  {
    question: "Paciente idoso com dor abdominal súbita, diarreia sanguinolenta e abdome em tábua. Diagnóstico mais provável:",
    options: [
      "Colite ulcerativa",
      "Perfuração por AINEs",
      "Doença intestinal isquêmica",
      "Doença de Crohn",
      "Íleo paralítico"
    ],
    correctIndex: 2,
    explanation: "Quadro de dor súbita, diarreia sangrenta e abdome rígido é típico de isquemia intestinal aguda."
  },
  {
    question: "Diarreia sanguinolenta após antibióticos sugere infecção por:",
    options: [
      "Campylobacter jejuni",
      "Yersínia",
      "E. coli enteroinvasiva",
      "Clostridium difficile",
      "Entamoeba histolytica"
    ],
    correctIndex: 3,
    explanation: "Clostridium difficile frequentemente causa colite pseudomembranosa após uso de antibióticos."
  },
  {
    question: "Paciente com granulomas submucosos em biópsia e diarreia intermitente. Diagnóstico mais compatível:",
    options: [
      "Colite ulcerativa",
      "Colite pseudomembranosa",
      "Doença de Crohn",
      "Doença celíaca",
      "Síndrome do intestino irritável"
    ],
    correctIndex: 2,
    explanation: "Granulomas são característicos da doença de Crohn, não da colite ulcerativa."
  },
  {
    question: "Manejo inicial de doença celíaca diagnosticada por biópsia é:",
    options: [
      "Prescrever antibióticos",
      "Ressecar segmento afetado cirurgicamente",
      "Administrar AINEs",
      "Recomendar aumento de fibras",
      "Iniciar dieta sem glúten"
    ],
    correctIndex: 4,
    explanation: "O tratamento primário da doença celíaca é a exclusão do glúten da dieta."
  },
  {
    question: "Qual é a capacidade normal da vesícula biliar em mililitros?",
    options: [
      "30 ml",
      "50 ml",
      "100 ml",
      "150 ml",
      "200 ml"
    ],
    correctIndex: 1,
    explanation: "A vesícula biliar armazena aproximadamente 50 ml de bile em condições normais."
  },
  {
    question: "Qual artéria abastece exclusivamente a vesícula biliar?",
    options: [
      "Artéria hepática própria",
      "Artéria hepática comum",
      "Artéria cística",
      "Artéria gastroduodenal",
      "Artéria mesentérica superior"
    ],
    correctIndex: 2,
    explanation: "A irrigação terminal da vesícula biliar é feita pela artéria cística."
  },
  {
    question: "Na patogenia de cálculos de colesterol, qual fator contribui para a formação dos cristais?",
    options: [
      "Supersaturação de colesterol",
      "Hipersecreção de sais biliares",
      "Aumentada motilidade vesicular",
      "Redução de muco na vesícula",
      "Excesso de fosfolipídios"
    ],
    correctIndex: 0,
    explanation: "Quando o colesterol excede a capacidade de solubilização pelos sais biliares ocorre supersaturação e formação de cristais."
  },
  {
    question: "Quais sais compõem os cálculos pigmentados?",
    options: [
      "Bilirrubinato de cálcio",
      "Colesterol cristalizado",
      "Sais biliares conjugados",
      "Fosfolipídios oxidados",
      "Triglicerídeos livres"
    ],
    correctIndex: 0,
    explanation: "Os cálculos pigmentados são ricos em sais de bilirrubinato de cálcio."
  },
  {
    question: "Qual a prevalência aproximada de cálculos de colesterol em países desenvolvidos?",
    options: [
      "10%",
      "50%",
      "70%",
      "90%",
      "100%"
    ],
    correctIndex: 3,
    explanation: "Cálculos de colesterol correspondem a cerca de 90% dos casos nos EUA e Europa Ocidental."
  },
  {
    question: "Como o estrogênio aumenta o risco de colelitíase?",
    options: [
      "Reduzindo a motilidade vesicular",
      "Inibindo HMG-CoA redutase",
      "Elevando secreção biliar de colesterol",
      "Aumentando reabsorção de sais biliares",
      "Promovendo lise de micelas"
    ],
    correctIndex: 2,
    explanation: "Estrogênios elevam a atividade da HMG-CoA redutase e aumentam a secreção de colesterol na bile."
  },
  {
    question: "Em colecistite aguda, qual porcentagem dos casos é associada a cálculos?",
    options: [
      "50%",
      "70%",
      "80%",
      "90%",
      "100%"
    ],
    correctIndex: 3,
    explanation: "Cerca de 90% das colecistites agudas são calculosas, por obstrução do ducto cístico."
  },
  {
    question: "Como são descritos macroscopicamente os cálculos de colesterol?",
    options: [
      "Marrom escuros e numerosos",
      "Amarelo-claros e radiolucentes",
      "Preto e friáveis",
      "Verde e cerosos",
      "Brancos e radiopacos"
    ],
    correctIndex: 1,
    explanation: "Cálculos de colesterol são amarelo-claros, de forma oval, e radiolucentes ao raio-X."
  },
  {
    question: "Qual microrganismo é frequentemente isolado em colecistite crônica?",
    options: [
      "Helicobacter pylori",
      "Salmonella typhi",
      "Listeria monocytogenes",
      "Clostridium perfringens",
      "Enterococos"
    ],
    correctIndex: 4,
    explanation: "Em colecistite crônica, bactérias como E. coli e enterococos colonizam a vesícula inflamada."
  },
  {
    question: "A tríade de Charcot inclui:",
    options: [
      "Dor, febre e icterícia",
      "Dor, vômitos e febre",
      "Icterícia, náusea e anorexia",
      "Febre, diarreia e dor",
      "Dor, hipotensão e confusão"
    ],
    correctIndex: 0,
    explanation: "Dor no hipocôndrio direito, febre e icterícia caracterizam a tríade de Charcot na colangite."
  },
  {
    question: "O que adiciona a pentade de Reynolds à tríade de Charcot?",
    options: [
      "Vômitos e diarreia",
      "Edema e prurido",
      "Hipotensão e confusão",
      "Hiperbilirrubinemia e ascite",
      "Taquicardia e sudorese"
    ],
    correctIndex: 2,
    explanation: "Hipotensão e confusão mental completam a pentade de Reynolds em colangite grave."
  },
  {
    question: "Qual exame de imagem combina diagnóstico e tratamento de obstruções biliares?",
    options: [
      "Ultrassonografia",
      "CPRM",
      "Tomografia computadorizada",
      "CPRE",
      "Colangiografia trans-hepática percutânea"
    ],
    correctIndex: 3,
    explanation: "A CPRE permite visualizar os ductos e, simultaneamente, remover cálculos ou drenar bile."
  },
  {
    question: "A colangite esclerosante primária é caracterizada por:",
    options: [
      "Infecção bacteriana aguda",
      "Fibrose progressiva dos ductos biliares",
      "Obstrução por cálculo único",
      "Atresia congênita dos ductos",
      "Dilatação microcística"
    ],
    correctIndex: 1,
    explanation: "Na CEP ocorre inflamação crônica e fibrose que estreitam progressivamente os ductos."
  },
  {
    question: "Qual tipo de cálculo é mais prevalente em populações ocidentais?",
    options: [
      "Cálculo pigmentado",
      "Cálculo de bilirrubina",
      "Cálculo de colesterol",
      "Cálculo misto",
      "Cálculo de fosfato"
    ],
    correctIndex: 2,
    explanation: "Em países desenvolvidos, cerca de 90% dos cálculos biliares são de colesterol."
  },
  {
    question: "Qual é o tratamento cirúrgico padrão para colecistite aguda calculosa?",
    options: [
      "Colecistectomia",
      "Drenagem percutânea",
      "Hepatectomia parcial",
      "Pancreatectomia",
      "Nefrectomia"
    ],
    correctIndex: 0,
    explanation: "A colecistectomia é o procedimento definitivo para colecistite aguda por cálculos."
  },
  {
    question: "Cenário: cálculo pequeno migra e obstrui o ducto colédoco. Qual complicação é mais provável?",
    options: [
      "Colangite ascendente",
      "Pancreatite crônica",
      "Perfuração vesicular",
      "Carcinoma de vesícula",
      "Íleo paralítico"
    ],
    correctIndex: 0,
    explanation: "Obstrução do ducto colédoco por cálculo leva ao acúmulo de bile e infecção nos ductos (colangite)."
  },
  {
    question: "Em paciente com cálculos pigmentados e colestase, qual condição subjacente deve ser investigada?",
    options: [
      "Hipertensão portal",
      "Anemia hemolítica",
      "Doença pulmonar crônica",
      "Fibrose cística",
      "Pancreatite alcoólica"
    ],
    correctIndex: 1,
    explanation: "Cálculos pigmentados estão associados ao aumento de bilirrubina não conjugada em anemias hemolíticas."
  },
  {
    question: "Cenário: paciente crítico em UTI desenvolve colecistite sem cálculos. Qual tipo é mais provável?",
    options: [
      "Colecistite crônica",
      "Colecistite acalculosa",
      "Colecistite litiásica",
      "Colecistite eosinofílica",
      "Colecistite tuberculosa"
    ],
    correctIndex: 1,
    explanation: "Colecistite acalculosa ocorre em situações de isquemia e trauma, sem presença de cálculos."
  },
  {
    question: "Em colangite com hipotensão e confusão, qual termo descreve esse quadro?",
    options: [
      "Síndrome de Charcot",
      "Pentade de Reynolds",
      "Triagem de Child-Pugh",
      "Íleo paralítico",
      "Síndrome de Mallory-Weiss"
    ],
    correctIndex: 1,
    explanation: "Hipotensão e confusão adicionadas à tríade de Charcot definem a pentade de Reynolds."
  },
  {
    question: "Ultrassonografia mostra dilatação ductal sem cálculo visível. Qual é o próximo exame mais indicado?",
    options: [
      "Tomografia de abdome",
      "CPRE",
      "CPRM",
      "Cintilografia hepática",
      "Colangiografia trans-hepática percutânea"
    ],
    correctIndex: 2,
    explanation: "A CPRM mapeia os ductos biliares e identifica obstruções não detectadas na ultrassonografia."
  },
  {
    question: "Qual é a principal causa de doença hepática gordurosa em adultos?",
    options: [
      "Consumo excessivo de álcool",
      "Resistência à insulina",
      "Obesidade",
      "Diabetes mellitus",
      "Genética familiar"
    ],
    correctIndex: 0,
    explanation: "O consumo excessivo de álcool é a causa mais comum de esteatose hepática alcoólica em adultos."
  },
  {
    question: "Qual das seguintes opções NÃO é um fator de risco para doença hepática gordurosa não alcoólica (DHGNA)?",
    options: [
      "Resistência à insulina",
      "Obesidade",
      "Hipertensão arterial",
      "Dislipidemia",
      "Tabagismo"
    ],
    correctIndex: 4,
    explanation: "Tabagismo não é considerado um fator metabólico associado diretamente à DHGNA."
  },
  {
    question: "Na esteatose hepática macrovesicular, as gotas lipídicas nos hepatócitos são:",
    options: [
      "Múltiplas e pequenas",
      "Uma gota grande que desloca o núcleo",
      "Invisíveis ao exame de rotina",
      "Predominantemente intracelulares",
      "Sempre presentes em todas as zonas hepáticas"
    ],
    correctIndex: 1,
    explanation: "Na esteatose macrovesicular, uma grande gota de gordura desloca o núcleo do hepatócito."
  },
  {
    question: "Qual enzima é ativada pela hiperinsulinemia e contribui para a síntese de ácidos graxos no fígado?",
    options: [
      "HMG-CoA redutase",
      "Acetil-CoA sintase",
      "Acetil-CoA carboxilase",
      "Lipase hepática",
      "Malonil-CoA desidrogenase"
    ],
    correctIndex: 2,
    explanation: "A acetil-CoA carboxilase é ativada pela insulina e catalisa o passo limitante da lipogênese."
  },
  {
    question: "Em relação à esteatose hepática, qual processo NÃO contribui para o acúmulo de gordura no fígado?",
    options: [
      "Aumento da lipogênese",
      "Diminuição da β-oxidação",
      "Redução da secreção de VLDL",
      "Aumento da secreção de HDL",
      "Resistência à insulina"
    ],
    correctIndex: 3,
    explanation: "Aumento da secreção de HDL não está envolvido no mecanismo de acúmulo de triglicerídeos hepáticos."
  },
  {
    question: "Os corpúsculos de Mallory são agregados de quais proteínas?",
    options: [
      "Colágeno e fibronectina",
      "Citokeratinas e ubiquitina",
      "Albumina e globulinas",
      "Fibrina e fibrinogênio",
      "Elastina e laminina"
    ],
    correctIndex: 1,
    explanation: "Os corpúsculos de Mallory contêm principalmente filamentos de citokeratinas ubiquitinadas."
  },
  {
    question: "Que célula do fígado se transforma em miofibroblasto e produz colágeno na fibrose?",
    options: [
      "Célula estrelada (Ito)",
      "Célula de Kupffer",
      "Hepatócito",
      "Colangiócito",
      "Endoteliograma sinusoidal"
    ],
    correctIndex: 0,
    explanation: "As células estreladas (Ito) se ativam e sintetizam matriz extracelular na fibrose hepática."
  },
  {
    question: "Qual é o consumo diário de álcool ponto-limite para o desenvolvimento de doença hepática alcoólica?",
    options: [
      "20 g/dia",
      "40 g/dia",
      "80 g/dia",
      "100 g/dia",
      "120 g/dia"
    ],
    correctIndex: 2,
    explanation: "Consumo crônico em torno de 80 g de álcool por dia é considerado limite para doença hepática alcoólica."
  },
  {
    question: "O excesso de NADH gerado no metabolismo do álcool leva a:",
    options: [
      "Aumento da lipogênese",
      "Aumento da β-oxidação dos ácidos graxos",
      "Diminuição da gliconeogênese",
      "Diminuição da síntese de triglicerídeos",
      "Aumento da secreção de VLDL"
    ],
    correctIndex: 0,
    explanation: "O excesso de NADH favorece a síntese de ácidos graxos e triglicerídeos no fígado."
  },
  {
    question: "Qual achado clínico é mais típico na esteatose hepática?",
    options: [
      "Icterícia intensa",
      "Hepatomegalia leve",
      "Dor em cólica",
      "Ascite volumosa",
      "Prurido generalizado"
    ],
    correctIndex: 1,
    explanation: "A esteatose pode ser assintomática ou manifestar-se por hepatomegalia leve sem icterícia."
  },
  {
    question: "Em hepatite alcoólica aguda, é comum encontrar:",
    options: [
      "Leucocitose neutrofílica",
      "Linfocitose",
      "Trombocitose",
      "Eosinofilia",
      "Neutropenia"
    ],
    correctIndex: 0,
    explanation: "A inflamação alcoólica aguda frequentemente cursa com leucocitose de predomínio neutrofílico."
  },
  {
    question: "Após quanto tempo de consumo excessivo de álcool geralmente se desenvolve cirrose?",
    options: [
      "5–10 anos",
      "10–15 anos",
      "15–20 anos",
      "20–25 anos",
      ">25 anos"
    ],
    correctIndex: 2,
    explanation: "A cirrose alcoólica costuma se manifestar após 15–20 anos de consumo excessivo."
  },
  {
    question: "Qual a chance aproximada de evolução para carcinoma hepatocelular em cirrose alcoólica?",
    options: [
      "1–5%",
      "5–10%",
      "10–20%",
      "20–30%",
      "30–40%"
    ],
    correctIndex: 2,
    explanation: "Estima-se que 10–20% dos pacientes com cirrose evoluam para carcinoma hepatocelular."
  },
  {
    question: "Qual é a causa intra-hepática dominante de hipertensão portal?",
    options: [
      "Cirrose hepática",
      "Esquistossomose",
      "Sarcoidose hepática",
      "Esteatose leve",
      "Doença granulomatosa"
    ],
    correctIndex: 0,
    explanation: "A cirrose causa restrição ao fluxo sinusal e é a principal causa intra-hepática de hipertensão portal."
  },
  {
    question: "O principal mecanismo fisiopatológico da ascite em cirrose é:",
    options: [
      "Hipertensão sinusoidal e hipoalbuminemia",
      "Excesso de bilirrubina no espaço de Disse",
      "Acúmulo de amônia na circulação",
      "Hiperaldosteronismo isolado",
      "Aumento da produção de citocinas"
    ],
    correctIndex: 0,
    explanation: "A combinação de hipertensão portal e baixa pressão oncótica pela hipoalbuminemia gera ascite."
  },
  {
    question: "Paciente com consumo de 100 g de álcool/dia há 5 anos e hepatomegalia leve. Qual estágio da doença hepática é mais provável?",
    options: [
      "Esteatose hepática",
      "Esteato-hepatite",
      "Cirrrose estabelecida",
      "DHGNA",
      "Hepatite viral"
    ],
    correctIndex: 0,
    explanation: "Uso prolongado de álcool com hepatomegalia leve sem sinais de inflamação grave sugere esteatose."
  },
  {
    question: "Um paciente com obesidade e resistência insulínica, sem histórico de álcool, com alterações inflamatórias no fígado provavelmente tem:",
    options: [
      "Hepatite alcoólica",
      "DHGNA",
      "Hepatite autoimune",
      "Hemocromatose",
      "Sarcoidose hepática"
    ],
    correctIndex: 1,
    explanation: "Na ausência de álcool, esteato-hepatite em paciente metabólico caracteriza DHGNA."
  },
  {
    question: "Para avaliar diretamente a pressão portal em paciente cirrótico, o exame mais indicado é:",
    options: [
      "Endoscopia digestiva alta",
      "Ultrassonografia Doppler",
      "Manometria portossistêmica",
      "Elastografia hepática",
      "Biópsia hepática"
    ],
    correctIndex: 2,
    explanation: "A manometria portossistêmica mede a diferença de pressão entre veia porta e veia hepática, avaliando hipertensão portal."
  },
  {
    question: "Em cirrose com esplenomegalia e trombocitopenia, o mecanismo mais provável é:",
    options: [
      "Hipoesplenismo",
      "Hiperesplenismo",
      "Produção deficiente de plaquetas",
      "Hemorragia digestiva",
      "Púrpura trombocitopênica idiopática"
    ],
    correctIndex: 1,
    explanation: "A congestão esplênica na hipertensão portal causa hiperesplenismo e queda de plaquetas."
  },
  {
    question: "Paciente cirrótico apresentando hipoxemia e shunt intrapulmonar. Qual síndrome descreve esse quadro?",
    options: [
      "Síndrome hepatorrenal",
      "Síndrome hepatopulmonar",
      "Hipertensão portopulmonar",
      "Síndrome de Cushing",
      "Síndrome de Mallory-Weiss"
    ],
    correctIndex: 1,
    explanation: "A síndrome hepatopulmonar ocorre quando há dilatações vasculares pulmonares e shunt em doença hepática avançada."
  }

  ];
  // (IMPORTANTE: mantenha a estrutura exatamente igual.)

  // === DAQUI PRA BAIXO: NÃO ALTERAR (código do funcionamento do quiz) ===

  // (Trecho do JavaScript igual ao já utilizado, omitido aqui para não poluir – é o mesmo do seu arquivo atual)
   // VAR globais
    let currentQuestionIndex=0, score=0, userAnswers=[], seconds=0, timerInterval, questionAnswered=false;

    // DOM
    const startSection = document.getElementById('start-section');
    const quizSection  = document.getElementById('quiz-section');
    const resultsSection = document.getElementById('results-section');
    const startButton  = document.getElementById('start-button');
    const nextButton   = document.getElementById('next-button');
    const restartButton= document.getElementById('restart-button');
    const usernameInput= document.getElementById('username');
    const questionNumber = document.getElementById('question-number');
    const questionText   = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const explanationContainer = document.getElementById('explanation');
    const timerElement = document.getElementById('timer');
    const finalScore   = document.getElementById('final-score');
    const finalTime    = document.getElementById('final-time');
    const questionsList= document.getElementById('questions-list');
    const leaderboardBody = document.getElementById('leaderboard-body');

    document.addEventListener('DOMContentLoaded', () => {
      startButton.addEventListener('click', startQuiz);
      nextButton.addEventListener('click', nextQuestion);
      restartButton.addEventListener('click', restartQuiz);
    });

    function startQuiz(){
      if(!usernameInput.value.trim()){ alert('Digite seu nome.'); return; }
      currentQuestionIndex=0; score=0; userAnswers=[]; seconds=0;
      startSection.classList.remove('active');
      quizSection.classList.add('active');
      timerElement.style.display='block';
      timerInterval = setInterval(()=>{ seconds++; updateTimer(); },1000);
      loadQuestion();
    }

    function updateTimer(){
      const m = Math.floor(seconds/60), s = seconds%60;
      timerElement.textContent = `${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
    }

    function loadQuestion(){
      questionAnswered=false;
      explanationContainer.style.display='none';
      nextButton.style.display='none';
      const q = questions[currentQuestionIndex];
      questionNumber.textContent = `Questão ${currentQuestionIndex+1} de ${questions.length}`;
      questionText.textContent   = q.question;
      optionsContainer.innerHTML = '';
      const letters=['a','b','c','d','e'];
      q.options.forEach((opt,i)=>{
        const div=document.createElement('div');
        div.className='option';
        div.textContent = `${letters[i]}) ${opt}`;
        div.onclick = ()=>selectOption(i);
        optionsContainer.appendChild(div);
      });
    }

    function selectOption(i){
      if(questionAnswered) return;
      questionAnswered=true;
      const q=questions[currentQuestionIndex];
      const opts=optionsContainer.children;
      opts[q.correctIndex].classList.add('correct');
      const isCorrect = i===q.correctIndex;
      if(!isCorrect) opts[i].classList.add('incorrect');
      if(isCorrect) score++;
      userAnswers.push({ questionIndex:currentQuestionIndex, userAnswerIndex:i, isCorrect });
      explanationContainer.textContent=q.explanation;
      explanationContainer.style.display='block';
      nextButton.textContent = currentQuestionIndex<questions.length-1 ? 'Próxima Questão' : 'Ver Resultados';
      nextButton.style.display='block';
    }

    function nextQuestion(){
      currentQuestionIndex++;
      if(currentQuestionIndex<questions.length) loadQuestion();
      else finishQuiz();
    }

    function finishQuiz(){
      clearInterval(timerInterval);
      quizSection.classList.remove('active');
      resultsSection.classList.add('active');
      timerElement.style.display='none';
      finalScore.textContent = `Você acertou ${score} de ${questions.length} questões`;
      finalTime.textContent  = `Tempo total: ${timerElement.textContent}`;
      displayUserAnswers();
      sendResultToBackend();
      loadLeaderboard();
    }

    function displayUserAnswers(){
      questionsList.innerHTML='';
      const letters=['a','b','c','d','e'];
      userAnswers.forEach((ans,idx)=>{
        const q=questions[ans.questionIndex];
        const item=document.createElement('div');
        item.className='question-list-item';
        item.innerHTML=`
          <div>
            <strong>Questão ${idx+1}:</strong>
            Você marcou <span class="${ans.isCorrect?'text-success':'text-danger'}">
            ${letters[ans.userAnswerIndex]}</span>, correta era <span class="text-success">
            ${letters[q.correctIndex]}</span>
          </div>
        `;
        const detail=document.createElement('div');
        detail.className='question-detail';
        detail.innerHTML=`
          <p><strong>${q.question}</strong></p>
          ${q.options.map((opt,i)=>`
            <div class="option ${i===q.correctIndex?'correct':''} ${i===ans.userAnswerIndex&&i!==q.correctIndex?'incorrect':''}">
              ${letters[i]}) ${opt}
            </div>
          `).join('')}
          <div class="explanation" style="display:block;">${q.explanation}</div>
        `;
        item.onclick = ()=>detail.style.display = detail.style.display==='block'?'none':'block';
        item.appendChild(detail);
        questionsList.appendChild(item);
      });
    }

    // === JSONP ===

    function resultadoInserido(res){
      console.log('Inserido:',res);
      loadLeaderboard();
    }

    function sendResultToBackend(){
      const u=encodeURIComponent(usernameInput.value.trim());
      const p=score, t=seconds;
      const s=document.createElement('script');
      s.src=`${API_URL}?callback=resultadoInserido&usuario=${u}&pontuacao=${p}&tempo=${t}`;
      document.body.appendChild(s);
    }

    function atualizaLeaderboard(data){
      leaderboardBody.innerHTML='';
      data.forEach((e,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${i+1}</td><td>${e.usuario}</td><td>${e.pontuacao}</td><td>${e.tempo<60?'00:'+('0'+e.tempo).slice(-2):Math.floor(e.tempo/60).toString().padStart(2,'0')+':'+('0'+e.tempo%60).slice(-2)}</td>`;
        leaderboardBody.appendChild(tr);
      });
    }

    function loadLeaderboard(){
      const s=document.createElement('script');
      s.src=`${API_URL}?callback=atualizaLeaderboard`;
      document.body.appendChild(s);
    }

    // === fim JSONP ===

    function restartQuiz(){
      resultsSection.classList.remove('active');
      startSection.classList.add('active');
      usernameInput.value='';
      usernameInput.focus();
    }

</script>

</body>
</html>
